<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SmartFlash - A flashcard study tool for Python, English Vocabulary, and Linux Commands">
    <meta name="theme-color" content="#4a90e2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="SmartFlash">
    <title>SmartFlash - Flashcard Study Tool</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="icons/icon-192.png">
</head>
<body>
    <div class="container">
        <!-- Deck Selection Screen -->
        <div id="deck-selection" class="screen active">
            <h1>SmartFlash</h1>
            <p class="subtitle">Choose a deck to study</p>
            <div id="deck-categories">
                <!-- Decks will be dynamically organized by CEFR level here -->
            </div>
            <!-- Three Module Section (Hidden by default, shown when icon is clicked) -->
            <div class="modules-grid" id="modules-container" style="display: none;">
                <!-- Left Module: Deck Explorer -->
                <div class="module-card">
                    <div class="module-header">
                        <div>
                            <h3 class="module-title">Deck Explorer</h3>
                            <p class="module-subtitle">Browse and filter your flashcard decks by difficulty</p>
                        </div>
                        <button id="cleanup-empty-decks-btn" class="cleanup-btn" title="Delete all empty decks">üóëÔ∏è Cleanup Empty</button>
                    </div>
                    <div class="filter-chips">
                        <button class="filter-chip active" data-filter="all">All</button>
                        <button class="filter-chip" data-filter="easy">Easy</button>
                        <button class="filter-chip" data-filter="medium">Medium</button>
                        <button class="filter-chip" data-filter="hard">Hard</button>
                        <button class="filter-chip" data-filter="unrated">Unrated</button>
                    </div>
                    <div id="deck-explorer-list" class="deck-list">
                        <!-- Decks will be dynamically populated here -->
                    </div>
                </div>

                <!-- Middle Module: Generate Flashcards from URL -->
                <div class="module-card">
                    <div class="module-header">
                        <h3 class="module-title">Generate Flashcards from URL</h3>
                        <p class="module-subtitle">Extract vocabulary from any webpage automatically</p>
                    </div>
                    <div class="module-form">
                        <div class="form-group">
                            <label for="module-cefr-level" class="form-label">English Level (CEFR)</label>
                            <select id="module-cefr-level" class="form-select">
                                <option value="A1">A1 - Beginner</option>
                                <option value="A2">A2 - Elementary</option>
                                <option value="B1" selected>B1 - Intermediate</option>
                                <option value="B2">B2 - Upper Intermediate</option>
                                <option value="C1">C1 - Advanced</option>
                                <option value="C2">C2 - Proficient</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="module-url-input" class="form-label">Article URL</label>
                            <input type="url" id="module-url-input" class="form-input" placeholder="https://example.com/article">
                        </div>
                        <div class="form-group">
                            <label for="topn-input" class="form-label">Number of Words (topN)</label>
                            <input type="number" id="topn-input" class="form-input" placeholder="20" min="5" max="50" value="20">
                        </div>
                        <div class="form-actions">
                            <button id="module-generate-btn" class="btn-primary">Create Cards</button>
                            <button id="quick-preview-btn" class="btn-secondary">Quick Preview</button>
                        </div>
                        <div id="module-generation-status" class="status-message"></div>
                    </div>
                </div>

                <!-- Right Module: AI Chat -->
                <div class="module-card">
                    <div class="module-header">
                        <h3 class="module-title">AI Chat with Your Card Deck</h3>
                        <p class="module-subtitle">Ask questions and get help with your flashcards</p>
                    </div>
                    <div class="module-form">
                        <div class="form-group">
                            <label for="ai-deck-select" class="form-label">Select Deck</label>
                            <select id="ai-deck-select" class="form-select">
                                <option value="">Choose a deck...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="ai-prompt-input" class="form-label">Your Question</label>
                            <textarea id="ai-prompt-input" class="form-textarea" rows="4" placeholder="Try: 'Quiz me', 'Show random cards', 'Explain [word]', 'Give examples', 'What's the hardest word?', 'Help me study', 'Show all words', 'Statistics'"></textarea>
                        </div>
                        <button id="ai-ask-btn" class="btn-primary">Ask AI</button>
                        <div id="ai-response-container" class="ai-response-container">
                            <div class="ai-response-placeholder">AI responses will appear here...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Study Screen -->
        <div id="study-screen" class="screen">
            <div class="study-header">
                <button id="back-btn" class="back-btn">‚Üê Back</button>
                <h2 id="current-deck-name"></h2>
                <div class="progress">
                    <span id="card-number">1</span> / <span id="total-cards">10</span>
                </div>
            </div>

            <div class="flashcard-container">
                <div id="flashcard" class="flashcard">
                    <div class="card-front">
                        <div class="card-content">
                            <h3 id="card-front-text"></h3>
                            <div class="audio-controls">
                                <button id="tts-word-btn" class="audio-btn" title="Read this word">
                                    <span class="audio-icon">üîä</span>
                                    <span class="audio-label">Read Word</span>
                                </button>
                                <button id="pronunciation-btn" class="audio-btn pronunciation-btn" title="Practice pronunciation">
                                    <span class="audio-icon">üé§</span>
                                    <span class="audio-label">Practice</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pronunciation Result Modal -->
                    <div id="pronunciation-modal" class="pronunciation-modal" style="display: none;">
                        <div class="modal-overlay"></div>
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3>Pronunciation Result</h3>
                                <button class="modal-close" id="close-pronunciation-modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div id="pronunciation-result" class="pronunciation-result"></div>
                            </div>
                        </div>
                    </div>
                    <div class="card-back">
                        <div class="card-content">
                            <h3 id="card-back-text"></h3>
                            <div class="audio-controls">
                                <button id="tts-sentence-btn" class="audio-btn" title="Read example sentence">
                                    <span class="audio-icon">üîä</span>
                                    <span class="audio-label">Read Sentence</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="study-controls">
                <button id="flip-btn" class="flip-btn">Flip Card</button>
                <div class="action-buttons">
                    <button id="forgot-btn" class="action-btn forgot-btn">I forgot</button>
                    <button id="knew-btn" class="action-btn knew-btn">I knew this</button>
                </div>
                <button id="next-btn" class="next-btn" disabled>Next Card ‚Üí</button>
            </div>

            <div class="study-stats">
                <div class="stat-item">
                    <span class="stat-label">Known:</span>
                    <span id="deck-known" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Unknown:</span>
                    <span id="deck-unknown" class="stat-value">0</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation Bar -->
    <nav class="bottom-nav">
        <button class="nav-item active" data-view="home" title="Home">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
            <span class="nav-label">Home</span>
        </button>
        <button class="nav-item" data-view="explorer" title="Deck Explorer">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7"></rect>
                <rect x="14" y="3" width="7" height="7"></rect>
                <rect x="14" y="14" width="7" height="7"></rect>
                <rect x="3" y="14" width="7" height="7"></rect>
            </svg>
            <span class="nav-label">Decks</span>
        </button>
        <button class="nav-item" data-view="generate" title="Generate Flashcards">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="17 8 12 3 7 8"></polyline>
                <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
            <span class="nav-label">Generate</span>
        </button>
        <button class="nav-item" data-view="ai-chat" title="AI Chat">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
            <span class="nav-label">AI Chat</span>
        </button>
    </nav>

    <script src="script.js"></script>
</body>
</html>

